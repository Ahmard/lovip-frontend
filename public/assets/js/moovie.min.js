/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /gh/BMSVieira/moovie.js@1.1.7/js/moovie.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
class Moovie{constructor(e){const t={selector:"defaultId",moovie_internalID:null,dimensions:{width:"100%"},config:{main:{loop:!0},storage:{captionOffset:!1,playrateSpeed:!1,captionSize:!1},controls:{playtime:!0,mute:!0,volume:!0,subtitles:!0,config:!0,fullscreen:!0,submenuCaptions:!0,submenuOffset:!0,submenuSpeed:!0,allowLocalSubtitles:!0},i18n:{play:"(Play:Pause)",mute:"(Mute:Unmute)",subtitles:"(Enable:Disable) Subtitles",config:"Settings",fullscreen:"(Enter:Exit) Fullscreen",main_topic:"settings:",main_caption:"Captions",main_offset:"Caption Offset",main_speed:"Speed",main_disabled:"Disabled",main_default:"Default",caption_topic:"Captions:",caption_back:"Back",caption_load:"Load Locally",offset_topic:"Adjust Caption Offset",speed_topic:"Speed Adjust"}},icons:{path:"./icons/"},customEvents:[{type:"",to:"",starttime:"",endtime:"",content:"",position:"",class:""}]};for(var n in null==e.config?e.config=t.config:e.config,null==e.config.controls?e.config.controls=t.config.controls:e.config.controls,t.config.controls)null==e.config.controls[n]?e.config.controls[n]=t.config.controls[n]:e.config.controls[n]=e.config.controls[n];for(var n in null==e.config.main?e.config.main=t.config.main:e.config.main,t.config.main)null==e.config.main[n]?e.config.main[n]=t.config.main[n]:e.config.main[n]=e.config.main[n];for(var n in null==e.config.storage?e.config.storage=t.config.storage:e.config.storage,t.config.storage)null==e.config.storage[n]?e.config.storage[n]=t.config.storage[n]:e.config.storage[n]=e.config.storage[n];for(var n in null==e.config.i18n?e.config.i18n=t.config.i18n:e.config.i18n,t.config.i18n)null==e.config.i18n[n]?e.config.i18n[n]=t.config.i18n[n]:e.config.i18n[n]=e.config.i18n[n];this.selector=e.selector.substring(1)||t.selector.substring(1),this.moovie_internalID=e.moovie_internalID||t.moovie_internalID;var o=null;o=void 0!==this.moovie_internalID&&null!=this.moovie_internalID?this.moovie_internalID:Math.floor(1e4*Math.random())+0,this.dimensions=e.dimensions||t.dimensions,this.config=e.config||t.config,this.i18n=e.config.i18n||t.config.i18n,this.icons=e.icons||t.icons,this.customEvents=e.customEvents||t.customEvents,this.element=document.getElementById(this.selector),this.randomID=o,this.options=e||t,this.events={captions:{name:!1,subtitles:!1},offset:{value:!1}};var i,s,l,a,c,r,u,d,m,p,_,v,g,f,y,h,b,E,I,k,L,S,B=this,T=0,x=0,w=0,M=1,C=0,A=0,O=0,H=0,D=[],F=this.icons,P=this.config,j=this.dimensions,N=this.selector,q=this.customEvents,z=this.mainmenu=[{name:"play_button",element:"<button class='player__button toggle' id='tooglebutton_"+o+"'><img id='moovie_bplay_"+o+"' src='"+F.path+"play.svg'></button>",opcional:!1,tooltip:this.i18n.play},{name:"progress_bar",element:"<div class='moovie_cuetime' id='moovie_cue_timer_"+o+"'>loading...</div><div id='moovie_moovie_el_progressbar_"+o+"' class='moovie_progress player__slider' top:15px;><input type='range' id='range_progress_"+o+"' class='styled-slider slider-progress' min='0' value='0' step='0.01' autocomplete='off' style='width: 100%; cursor:pointer;' /><canvas id='moovie_buffered_"+o+"' style='position: absolute; bottom: 14px; left: 0; opacity: 0.4;  width: 100%; height:5px;'></canvas></div>",opcional:!1,tooltip:!1},{name:"playtime",element:"<div id='moovie_el_current_"+o+"' class='player__button player_button_disabled moovie_currentime'><span id='moovie_currentime_"+o+"'>00:00</span> / <span id='moovie_fulltime_"+o+"'></span></div>",opcional:!0,tooltip:!1},{name:"mute",element:"<button id='mooviegrid_mute_"+o+"' class='player__button'><img id='icon_volume_"+o+"' src='"+F.path+"volume.svg'></button>",opcional:!0,tooltip:this.i18n.mute},{name:"volume",element:"<input type='range' id='mooviegrid_volume_"+o+"' style='max-width:100px; min-width:50px;' name='volume' class='moovie_progress_sound' min=0 max='1' step='0.01' value='1'>",opcional:!0,tooltip:!1},{name:"subtitles",element:"<button id='moovie_subtitle_"+o+"' style='margin-left:5px' class='player__button'><img class='opacity_svg' id='moovie_subtitle_svg_"+o+"' src='"+F.path+"cc.svg'></button>",opcional:!0,tooltip:this.i18n.subtitles},{name:"config",element:"<button id='moovie_el_cog_"+o+"' class='player__button'><img src='"+F.path+"cog.svg'></button>",opcional:!0,tooltip:this.i18n.config},{name:"fullscreen",element:"<button id='fullscreen_"+o+"' class='player__button fullscreen_button'><img src='"+F.path+"fullscreen.svg'></button>",opcional:!0,tooltip:this.i18n.fullscreen},{name:"Main Submenu",element:"<div style='display:none;' class='moovie_submenu menuclosed' id='moovie_submenu_"+o+"'></div>",opcional:!1,tooltip:!1}],R=this.submenu={mainSubmenu:{mainElement:"<ul id='moovie_submenu_main_"+o+"'></ul>",parentID:"moovie_submenu_main_",elements:[{name:"topic",element:"<li class='topic_submenu'>"+this.i18n.main_topic+"</li>",opcional:!1},{name:"submenuCaptions",element:"<li id='this.moovie_el_topicCaption_"+o+"'><span>"+this.i18n.main_caption+"</span><span class='option_submenu' id='option_submenu_caption_"+o+"'>"+this.i18n.main_disabled+"</span></li>",opcional:!0},{name:"submenuOffset",element:"<li id='moovie_el_capoffset_"+o+"'><span >"+this.i18n.main_offset+"</span><span class='option_submenu' id='option_submenu_range_"+o+"'>0s</span></li>",opcional:!0},{name:"submenuSpeed",element:"<li id='topic_submenu_speed_"+o+"'><span>"+this.i18n.main_speed+"</span><span class='option_submenu' id='option_submenu_speed_"+o+"'>"+this.i18n.main_default+"</span></li>",opcional:!0}]},captionSubmenu:{mainElement:"<ul style='display:none;' id='moovie_submenu_captions_"+o+"'><input style='display:none;' type='file' id='localsub_"+o+"'><li class='topic_submenu'>"+this.i18n.caption_topic+"</li><li id='moovie_el_capback_"+o+"' style='font-weight:bold;'>"+this.i18n.caption_back+"</li></ul>",parentID:"moovie_submenu_captions_",elements:[{name:"allowLocalSubtitles",element:"<li id='locally_"+o+"' style='font-weight:bold;'>"+this.i18n.caption_load+"</li>",opcional:!0}]},rangeSubmenu:{mainElement:"<ul style='display:none; width:250px;' id='moovie_range_captions_"+o+"'><li class='topic_submenu'>"+this.i18n.offset_topic+"<output style='position:absolute; right:22px;' id='valoffset_"+o+"'>0</output></li><li class='topic_submenu'><span>-5s</span><span style='float: right;'>+5s</span><input type='range' oninput='valoffset_"+o+".value = offset_range_input_"+o+".value' id='offset_range_input_"+o+"' min='-5' max='5' step='0.2'></li>",parentID:"moovie_range_captions_"},speedSubmenu:{mainElement:"<ul style='display:none; width:250px;' id='moovie_range_speed_"+o+"'><li class='topic_submenu'>"+this.i18n.speed_topic+"<output style='position:absolute; right:22px;' id='valoffset_speed_"+o+"'>1</output></li><li class='topic_submenu'><span>0.1x</span><span style='float: right;'>8x</span><input type='range' value='1' oninput='valoffset_speed_"+o+".value = offset_range_speed_"+o+".value' id='offset_range_speed_"+o+"' min='0.1' max='8' step='0.1'></li>",parentID:"moovie_range_speed_"}};let V=new CustomEvent("captionchange",{detail:this.events.captions,bubbles:!1,cancelable:!1,composed:!1}),W=new CustomEvent("offsetchange",{detail:this.events.offset,bubbles:!1,cancelable:!1}),K=new CustomEvent("togglecaption",{detail:this.events.captions,bubbles:!1,cancelable:!1});function X(e,t){var n;return function(){var o=this,i=arguments,s=function(){n=!1};n||(e.apply(o,i),n=!0,setTimeout(s,t))}}var G=this.handleCustomEvents=function(){for(var e=0;e<q.length;e++){let t=q[e].to,n=Math.floor(1e4*Math.random())+0;if(q[e].hasOwnProperty("fired")&&q[e].fired)l.currentTime>q[e].endtime&&(q[e].fired=!1,document.getElementById("moovie_ce_"+q[e].eventID).remove());else if(l.currentTime>q[e].starttime&&l.currentTime<q[e].endtime){Object.assign(q[e],{fired:!0}),Object.assign(q[e],{eventID:n}),h.insertAdjacentHTML("beforeend","<div id='moovie_ce_"+n+"' class='moovie_cevent "+q[e].position+" "+q[e].class+"'>"+q[e].content+"</div>");let o=document.getElementById("moovie_ce_"+n);switch(q[e].type){case"skip":q[e].to<=l.duration&&!isNaN(q[e].to)&&q[e].to&&o.addEventListener("click",(function(){var e;e=t,B.video.currentTime=e,B.moovie_el_progressbar.value=e}));break;case"redirect":q[e].to&&o.addEventListener("click",(function(){window.location.href=t}));break;case"function":q[e].to&&o.addEventListener("click",(function(){t()}));break;default:console.log("No action was added to this event")}}}},U=this.handleStorage=function(e,t,n){switch(e){case"set":localStorage.setItem(t,n);break;case"get":break;case"setStorage":P.storage.captionOffset&&(d.value=localStorage.getItem("captionOffset"),re()),P.storage.playrateSpeed&&(u.value=localStorage.getItem("playrateSpeed"),ue()),P.storage.captionSize&&(document.getElementById("caption_track_"+o).style.fontSize=localStorage.getItem("captionSize")+"px")}},Y=this.setState=function(e){"pause"==e&&(document.getElementById("poster_layer_"+o).style.backgroundImage="url('"+i+"')",l.pause(),document.getElementById("moovie_bplay_"+o).src=F.path+"play.svg",ee("show"),_e("play_button",0))},J=this.togglePlay=function(){1==l.paused?(l.play(),document.getElementById("moovie_bplay_"+o).src=F.path+"pause.svg",ee("hide"),_e("play_button",1)):(l.pause(),ee("show"),document.getElementById("moovie_bplay_"+o).src=F.path+"play.svg",_e("play_button",0))},Q=this.SetFullScreen=function(e){switch(e){case"toggleFullscreen":g.requestFullscreen?g.requestFullscreen():g.webkitRequestFullscreen?g.webkitRequestFullscreen():g.msRequestFullscreen&&g.msRequestFullscreen(),_e("fullscreen",1),1>=outerHeight-innerHeight&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),_e("fullscreen",0)),fe("CAll");break;case"checkFullscreen":1>=outerHeight-innerHeight?_e("fullscreen",1):_e("fullscreen",0)}};function Z(){var e,t,n=a.getContext("2d"),o=B.video.buffered,i=o.length,s=a.width,l=a.height,c=B.video.duration;for(n.clearRect(0,0,s,l),n.fillStyle="#e1e1dd";i--;)e=o.start(i)/c*s,t=o.end(i)/c*s,n.fillRect(e,0,t-e,l);setTimeout(Z,500)}function $(){l.focus()}function ee(e){"show"==e?b.style.display="block":"hide"==e&&(document.getElementById("poster_layer_"+o).style.backgroundImage="none",b.style.display="none")}function te(){l[this.name]=this.value}function ne(e,t){switch(t){case"left":var n=l.currentTime;l.currentTime=n-e;var o=k.value;k.value=Number(o)-5;break;case"right":n=l.currentTime;l.currentTime=n+e;o=k.value;k.value=Number(o)+5}}function oe(e){w=function(e){return e.offsetX/e.target.clientWidth*parseInt(e.target.getAttribute("max"))}(e).toFixed(2),v.style.opacity="1",v.style.left=e.offsetX+"px",v.innerHTML=se(w)}function ie(){return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)}function se(e){var t=new Date(1970,0,1);t.setSeconds(e);var n=t.toTimeString().substr(0,8);return e>86399&&(n=Math.floor((t-Date.parse("1/1/70"))/36e5)+n.substr(2)),e<3600&&(n=n.substring(3)),n}function le(){0==A&&(document.getElementById("moovie_currentime_"+o).innerHTML=se(l.currentTime)),l.currentTime>=l.duration&&(l.currentTime=0,k.value=0,1==P.main.loop?J():Y("pause"))}function ae(){const e=[".vtt",".srt"];new Promise((async function(t,n){const i=document.querySelector("#localsub_"+o).files[0];var s=i.name.substr(i.name.length-4);if(e.includes(s)){document.querySelectorAll("#moovie_submenu_captions_"+o+" .caption_track").forEach((e=>{e.remove()}));const e=await(e=>new Promise(((t,n)=>{const o=new FileReader;o.readAsDataURL(e),o.onload=()=>t(o.result),o.onerror=e=>n(e)})))(i);let n=i.name.substring(0,10);document.getElementById(N).insertAdjacentHTML("beforeend","<track label='"+n+"...' format='"+s+"' srclang='Local' src='"+e+"'>"),t()}else console.log("Only .vtt and .srt formats are allowed.")})).then((function(){Ee(),console.log("Local caption added successfully.")}))}var ce=X((function(){if(Z(),!l.paused){var e=k.value;k.value=Number(e)+1}}),1e3),re=this.OffsetChange=function(){O=document.getElementById("offset_range_input_"+o).value,document.getElementById("option_submenu_range_"+o).innerHTML=O+"s",document.getElementById("valoffset_"+o).value=O,P.storage.captionOffset&&U("set","captionOffset",O),B.events.offset.value=O,B.video.dispatchEvent(W)},ue=this.SpeedChange=function(){M=document.getElementById("offset_range_speed_"+o).value,document.getElementById("valoffset_speed_"+o).value=M,document.getElementById("option_submenu_speed_"+o).innerHTML=1==M?B.i18n.main_default:M+"x",l.playbackRate=M,P.storage.playrateSpeed&&U("set","playrateSpeed",M)};function de(e){if(ie()){if(null==(t=document.getElementById("range_progress_"+o).value)){let n=(t=e.touches[0].clientX)/f.offsetWidth*l.duration;n>=l.duration&&(n=l.duration),l.currentTime=n}else l.currentTime=t}else{var t;let n=(t=e.offsetX)/f.offsetWidth*l.duration;n>=l.duration&&(n=l.duration),l.currentTime=n}}function me(e){l.volume=r.value,U("set","scrubsound",l.volume),ge("checkMute")}function pe(e){"close"==e?0==H&&0==l.paused&&(fe("CAll"),document.getElementById("moovie__controls_"+o).style.opacity=0,document.getElementById("caption_track_"+o).style.marginBottom="0px"):"open"==e&&1==x&&(document.getElementById("caption_track_"+o).style.marginBottom="40px",document.getElementById("moovie__controls_"+o).style.opacity=1)}var _e=B.ChangeTooltip=function(e,t){let n=B.tooltips_menu[e].element;for(var o=0,i=0;i<B.mainmenu.length;i++)B.mainmenu[i].name==e&&(o=B.mainmenu[i].tooltip);if(o.indexOf("(")>-1){var l=o.substring(o.lastIndexOf("(")+1,o.lastIndexOf(")"));s=l.split(":");var a=o.replace(/\(.*\)/,"");a=a.replace(" ","");var c=s[t]+" "+a}c&&(n.innerText=c);let r=n.offsetWidth/2-7;if(n.style.marginLeft="-"+r+"px",n.offsetLeft+n.offsetWidth>=B.moovie_el_controlbar.offsetWidth){let e=n.offsetLeft+n.offsetWidth-B.moovie_el_controlbar.offsetWidth;e=r+e+5,n.style.marginLeft="-"+e+"px"}n.offsetLeft<=0&&(n.style.marginLeft="-19px")},ve=this.ActivateSubtitles=function(){1==C?0==T?(T=1,document.getElementById("moovie_subtitle_svg_"+o).classList.remove("opacity_svg"),_e("subtitles",1),B.events.captions.subtitles=!0):1==T&&(T=0,document.getElementById("moovie_subtitle_svg_"+o).classList.add("opacity_svg"),_e("subtitles",0),B.events.captions.subtitles=!1):console.log("You must choose an Subtitle first."),B.video.dispatchEvent(K)},ge=this.checkSoundLevel=function e(t){switch(t){case"checkMute":l.muted||0==l.volume?(l.muted=!1,r.value=localStorage.getItem("scrubsound"),l.volume=localStorage.getItem("scrubsound"),document.getElementById("icon_volume_"+o).src=F.path+"mute.svg",_e("mute",1)):(document.getElementById("icon_volume_"+o).src=F.path+"volume.svg",_e("mute",0));break;case"toogleMute":1==l.muted?e("unmutePlayer"):e("mutePlayer");break;case"checkStorage":localStorage.getItem("scrubsound")?(r.value=localStorage.getItem("scrubsound"),l.volume=localStorage.getItem("scrubsound")):(r.value="1",l.muted=!1,U("set","scrubsound",1)),e("checkMute");break;case"mutePlayer":l.muted=!0,l.volume=0,document.getElementById("icon_volume_"+o).src=F.path+"mute.svg",document.getElementById("mooviegrid_volume_"+o).value="0",_e("mute",1);break;case"unmutePlayer":l.muted=!1,e("checkMute"),localStorage.getItem("scrubsound")?r.value=localStorage.getItem("scrubsound"):r.value="1",_e("mute",0),0!=l.volume&&(document.getElementById("icon_volume_"+o).src=F.path+"volume.svg")}},fe=this.Submenu=function(e){switch(e){case"toggleSubmenu":S.style.display="block",L.style.display="none",_.style.display="none",m.style.display="none",E.classList.contains("menuclosed")?(E.style.display="block",E.classList.add("menuopen"),E.classList.remove("menuclosed"),H=1):(E.style.display="none",E.classList.add("menuclosed"),E.classList.remove("menuopen"),H=0);break;case"CAll":S.style.display="none",L.style.display="none",_.style.display="none",m.style.display="none",E.classList.add("menuclosed"),H=0;break;case"OCaption":S.style.display="none",L.style.display="block";break;case"CCaption":S.style.display="block",L.style.display="none";break;case"OSpeed":S.style.display="none",document.getElementById("moovie_range_speed_"+o).style.display="block";break;case"ORange":S.style.display="none",document.getElementById("moovie_range_captions_"+o).style.display="block"}},ye=this.TransformPlayer=function(e){h.offsetWidth<=460?(A=1,document.getElementById("moovie_el_current_"+o).style.display="none",document.getElementById("moovie_moovie_el_progressbar_"+o).classList.add("responsive_bar"),v.classList.add("moovie_cuetime_small")):(A=0,document.getElementById("moovie_el_current_"+o).style.display="block",document.getElementById("moovie_moovie_el_progressbar_"+o).classList.remove("responsive_bar"),document.getElementById("moovie_fulltime_"+o).innerHTML=se(l.duration),v.classList.remove("moovie_cuetime_small"))},he=this.SetCaptionSize=function(e){const t=document.getElementById("caption_track_"+o);var n=window.getComputedStyle(t).fontSize;if(e)"sizeUp"==e?(n=n.slice(0,-2),n=Number(n)+Number(1),t.style.fontSize=n+"px"):"sizeDown"==e&&(n=n.slice(0,-2),n=Number(n)-Number(1),t.style.fontSize=n+"px"),P.storage.captionSize&&U("set","captionSize",n);else{var i=.1*h.offsetWidth;t.style.fontSize=i+"%",t.style.lineHeight=i/3+"px"}},be=this.PlayCaption=function(e){function t(){for(var e=1;e<D.length;e++)if(null!=D[e].starttime&&null!=D[e].endtime){var t=D[e].starttime,n=D[e].endtime;if(O>=0)var i=l.currentTime-O;else{var s=String(O).substring(1);i=l.currentTime+Number(s)}a=void 0,c=void 0,r=void 0,u=void 0,d=void 0,m=void 0,a=function(e,t){return("000"+e).slice(-1*t)},c=parseFloat(i).toFixed(3),r=Math.floor(c/60/60),u=Math.floor(c/60)%60,d=Math.floor(c-60*u),m=c.slice(-3),(i=a(r,2)+":"+a(u,2)+":"+a(d,2)+"."+a(m,3))>=t&&i<=n&&1==T&&(null!=D[e].text2?document.getElementById("caption_track_"+o).innerHTML=D[e].text1+"<br>"+D[e].text2:document.getElementById("caption_track_"+o).innerHTML=D[e].text1),i>n&&(document.getElementById("caption_track_"+o).innerHTML="")}var a,c,r,u,d,m}D=[];var n=new XMLHttpRequest;if(n.open("GET",e.attributes.src.nodeValue,!0),e.attributes.format)var i=e.attributes.src.nodeValue+e.attributes.format.nodeValue;else i=e.attributes.src.nodeValue;B.events.captions.name=e.attributes.label.nodeValue,n.onload=function(){if(this.status>=200&&this.status<400){var e=this.response;e=e.replace(/(\r\n|\r|\n)/g,"\n");var t=i.substr(i.length-4);".srt"==t&&(e="STR\n\n"+e),e.split("\n\n").map((function(e){var n,o,i;null!=(s=e.split("\n"))[1]?isNaN(s[0])?(n=s[0].replace(/-/g,"")).replace(/ /g,"")&&(".srt"==t&&(n=s[0].replace(/,/g,".")),o=(o=n.substr(0,n.indexOf(">"))).replace(/ /g,""),i=(i=n.split(">",2))[1].replace(/ /g,""),o=o.replace(/--/g,""),i=i.replace(/--/g,""),".srt"==t&&(i=i.replace(/,/g,"."),o=o.replace(/,/g,".")),D.push({starttime:o,endtime:i,text1:s[1],text2:s[2]})):(n=s[1].replace(/-/g,"")).replace(/ /g,"")&&(o=(o=n.substr(0,n.indexOf(">"))).replace(/ /g,""),i=(i=n.split(">",2))[1].replace(/ /g,""),".srt"==t&&(i=i.replace(/,/g,"."),o=o.replace(/,/g,".")),D.push({starttime:o,endtime:i,text1:s[2],text2:s[3]})):D.push({starttime:void 0,endtime:void 0,text1:void 0,text2:void 0})}))}},n.send(),l.addEventListener("timeupdate",t,!0),1==C?l.removeEventListener("timeupdate",t,!0):(C=1,ve()),B.video.dispatchEvent(V)},Ee=(this.SetCaptions=function(e){let t=e.attributes.src.nodeValue.substr(e.attributes.src.nodeValue.length-4),n=e.track.label;var i=Math.floor(1e4*Math.random())+0;e.attributes.format&&(t=e.attributes.format.nodeValue),L.insertAdjacentHTML("beforeend","<li class='caption_track' id='captionid_"+i+"'><span>"+n+"</span><span class='labelformat'>"+t+"</span></li>"),document.getElementById("captionid_"+i).addEventListener("click",(function(){be(e),document.getElementById("option_submenu_caption_"+o).innerHTML=n,fe("toggleSubmenu")}))},this.GetCaptions=function(){for(var e=document.getElementById(B.selector).getElementsByTagName("track"),t=0;t<e.length;t++)B.SetCaptions(e[t])});this.Keybinds=function(){const e={keycode_32(){J()},keycode_75(){J()},keycode_70(){Q("toggleFullscreen")},keycode_39(){ne(5,"right")},keycode_37(){ne(5,"left")},keycode_77(){ge("toogleMute")},keycode_67(){ve()},keycode_shift87(){he("sizeUp")},keycode_shift83(){he("sizeDown")}};l.addEventListener("keydown",(function(t){let n;(32==t.keyCode||t.shiftKey&&87==t.keyCode||t.shiftKey&&83==t.keyCode)&&t.preventDefault(),n=t.shiftKey?e["keycode_shift"+t.keyCode]:e["keycode_"+t.keyCode],n&&n()}))},this.SetupLogic=function(){if(g=document.querySelector("#moovie__video_"+o),l=g.querySelector("#moovie_vid_"+o),this.video=l,l.addEventListener("loadedmetadata",(e=>{this.medialoading.style.display="none",I.style.opacity=1,x=1,k.setAttribute("max",l.duration),0==A&&(document.getElementById("moovie_fulltime_"+o).innerHTML=se(l.duration)),Z(),U("setStorage"),ge("checkStorage")})),l.addEventListener("timeupdate",ce),l.addEventListener("timeupdate",le),l.addEventListener("timeupdate",G),g.addEventListener("click",$),(y=g.querySelector(".fullscreen_button")).addEventListener("click",(function(){Q("toggleFullscreen")}),!0),document.addEventListener("fullscreenchange",(function(){Q("checkFullscreen")}),!0),g.querySelector(".toggle").addEventListener("click",J),g.querySelectorAll(".player__slider").forEach((e=>e.addEventListener("change",te))),this.moovie_el_rangeinput.addEventListener("change",re),this.moovie_el_speedinput.addEventListener("change",ue),r=document.getElementById("mooviegrid_volume_"+o),document.getElementById("mooviegrid_mute_"+o).addEventListener("click",(function(){ge("toogleMute")}),!1),f=g.querySelector(".moovie_progress"),this.control_buttons.config.addEventListener("click",(function(){fe("toggleSubmenu")}),!0),this.moovie_el_topicCaption.addEventListener("click",(function(){fe("OCaption")}),!0),this.moovie_el_topicSpeed.addEventListener("click",(function(){fe("OSpeed")}),!0),this.moovie_el_capback.addEventListener("click",(function(){fe("CCaption")}),!0),this.control_buttons.subtitles.addEventListener("click",ve),h.addEventListener("mouseleave",(function(){fe("CAll")}),!1),this.moovie_el_capoffset.addEventListener("click",(function(){fe("ORange")}),!0),ie()){"ios"==function(){const e=navigator.userAgent;return/android/i.test(e)?"android":/iPad|iPhone|iPod/i.test(e)?"ios":void 0}()&&(this.moovie_el_volume.style.display="none",y.style.display="none",l.style.transformStyle="preserve-3d"),k.addEventListener("touchmove",(function(e){de(e),l.pause()})),k.addEventListener("change",(function(e){de(e),l.pause()||J(),ee("hide")}),!1),b.addEventListener("touchend",(function(e){l.pause()||J()})),r.addEventListener("touchmove",(function(e){me()})),r.addEventListener("change",(function(e){me()}),!1),c.style.display="none";e=null;h.addEventListener("touchstart",(t=>{clearTimeout(e),pe("open"),e=setTimeout((function(){pe("close")}),4e3)})),h.addEventListener("touchmove",(t=>{clearTimeout(e)})),h.addEventListener("touchend",(t=>{clearTimeout(e),e=setTimeout((function(){pe("close")}),4e3)}))}else{let t=!1;f.addEventListener("click",de),f.addEventListener("mousemove",(e=>t&&de(e))),r.addEventListener("click",me);let n=!1;r.addEventListener("mousemove",(e=>n&&me())),r.addEventListener("mousedown",(()=>n=!0)),r.addEventListener("mouseup",(()=>n=!1)),(b=g.querySelector("#poster_layer_"+o)).addEventListener("click",J),l.addEventListener("click",J),c.addEventListener("click",(function(){p.click()}),!0),p.addEventListener("change",ae),document.getElementById("range_progress_"+o).addEventListener("mousemove",(function(e){oe(e)})),document.getElementById("range_progress_"+o).addEventListener("mouseleave",(function(e){v.style.opacity=0})),f.addEventListener("mousedown",(()=>t=!0)),f.addEventListener("mouseup",(()=>t=!1)),I.addEventListener("mouseover",(e=>{H=1})),I.addEventListener("mouseleave",(e=>{H=0})),k.addEventListener("input",(function(e){l.pause()}),!1),k.addEventListener("change",(function(e){J(),ee("hide")}),!1),pe("close");var e=null;h.addEventListener("mousemove",(t=>{clearTimeout(e),pe("open"),e=setTimeout((function(){pe("close")}),2e3)})),h.addEventListener("mouseleave",(t=>{clearTimeout(e),pe("close")}))}},this.SetupMenu=function(){for(var e=0;e<z.length;e++)null!=this.config.controls[z[e].name]&&1==this.config.controls[z[e].name]||0==z[e].opcional?I.insertAdjacentHTML("beforeend",z[e].element):I.insertAdjacentHTML("beforeend","<div style='display:none;'>"+z[e].element+"</div>");var t=this.tooltips_menu=[];for(e=0;e<z.length;e++)if(z[e].tooltip){let n=(new DOMParser).parseFromString(z[e].element,"text/html");document.getElementById(n.body.firstChild.id).insertAdjacentHTML("beforeend","<div id='moovie_"+z[e].name+"_tooltip_"+o+"' class='moovie_tooltip'>"+z[e].tooltip+"</div>");document.getElementById(n.body.firstChild.id);let i=document.getElementById("moovie_"+z[e].name+"_tooltip_"+o);t[z[e].name]={element:i},this.ChangeTooltip(z[e].name,0)}E=document.getElementById("moovie_submenu_"+o);for(let t in R)if(E.insertAdjacentHTML("beforeend",R[t].mainElement),R[t].hasOwnProperty("elements"))for(e=0;e<R[t].elements.length;e++)null!=this.config.controls[R[t].elements[e].name]&&1==this.config.controls[R[t].elements[e].name]||0==R[t].elements[e].opcional?document.getElementById(R[t].parentID+o).insertAdjacentHTML("beforeend",R[t].elements[e].element):document.getElementById(R[t].parentID+o).insertAdjacentHTML("beforeend","<div style='display:none;'>"+R[t].elements[e].element);k=document.getElementById("range_progress_"+o),L=document.getElementById("moovie_submenu_captions_"+o),m=document.getElementById("moovie_range_captions_"+o),_=document.getElementById("moovie_range_speed_"+o),this.moovie_el_topicCaption=document.getElementById("this.moovie_el_topicCaption_"+o),this.moovie_el_topicSpeed=document.getElementById("topic_submenu_speed_"+o),this.moovie_el_capback=document.getElementById("moovie_el_capback_"+o),this.moovie_el_capoffset=document.getElementById("moovie_el_capoffset_"+o),this.moovie_el_speedinput=u=document.getElementById("offset_range_speed_"+o),this.moovie_el_rangeinput=d=document.getElementById("offset_range_input_"+o),this.moovie_el_progressbar=k,this.moovie_el_volume=document.getElementById("mooviegrid_volume_"+o),this.moovie_el_cuetimer=v=document.getElementById("moovie_cue_timer_"+o),this.moovie_el_submenuBase=E,this.moovie_el_localsub=p=document.getElementById("localsub_"+o),this.moovie_el_locally=c=document.getElementById("locally_"+o),this.moovie_el_submain=S=document.getElementById("moovie_submenu_main_"+o),this.moovie_el_buffered=a=document.getElementById("moovie_buffered_"+o),this.control_buttons={play:this.moovie_el_play=document.getElementById("tooglebutton_"+o),mute:this.moovie_el_mute=document.getElementById("mooviegrid_mute_"+o),subtitles:this.moovie_el_subtitles=document.getElementById("moovie_subtitle_"+o),config:this.moovie_el_cog=document.getElementById("moovie_el_cog_"+o),fullscreen:this.moovie_el_fullscreen=document.getElementById("fullscreen_"+o)}},this.SetupPlayer=function(){var e=this.element.getAttribute("src");null==e&&null!=this.element.getElementsByTagName("source")[0]?e=this.element.getElementsByTagName("source")[0].src:console.log("No video source found. Read documentation to a add video source dynamically."),i=document.getElementById(this.selector).getAttribute("poster"),this.element.style.display="none",this.element.insertAdjacentHTML("afterend","<div style='width:"+j.width+"' id='moovie__video_"+o+"' class='moovie'></div>"),this.moovie_el_video=h=document.getElementById("moovie__video_"+o),h.insertAdjacentHTML("beforeend","<video tabindex='1' id='moovie_vid_"+o+"' preload='auto' class='player__video viewer'style='width:100%; height:100%;' src='"+e+"' playsinline></video>"),h.insertAdjacentHTML("beforeend","<div style='opacity:0;' id='moovie__controls_"+o+"' class='moovie_controls'></div>"),this.moovie_el_controlbar=I=document.getElementById("moovie__controls_"+o),h.insertAdjacentHTML("afterbegin","<div id='medialoading_"+o+"' class='loadingv'><div class='loading animated fadeIn'><div class='moovie_bg'></div></div></div><div class='poster_layer posteron' id='poster_layer_"+o+"'></div>"),this.medialoading=document.getElementById("medialoading_"+o),this.moovie_el_poster=b=document.getElementById("poster_layer_"+o),b.insertAdjacentHTML("afterbegin","<div class='poster_center' id='poster_center_"+o+"' style=''></div>"),document.getElementById("poster_center_"+o).insertAdjacentHTML("afterbegin","<div class='poster_button'><img src='"+F.path+"play.svg' style='width: 24px; position: relative; left: 3px;'></div>"),null!=i&&(b.style.backgroundImage="url("+i+")",b.style.backgroundSize="100%",b.style.backgroundPositionY="center"),h.insertAdjacentHTML("beforeend","<div class='moovie_captionspot caption_size'><p class='moovie_caption' id='caption_track_"+o+"'></p></div>"),this.SetupMenu(),this.SetupLogic(),this.GetCaptions(),this.Keybinds(),he(),ye()};this.SetupPlayer();var Ie=X((function(){he(),ye()}),100);window.addEventListener("resize",Ie)}togglePlay(){this.togglePlay()}toggleSubtitles(){this.ActivateSubtitles()}toggleFullscreen(){this.SetFullScreen("toggleFullscreen")}destroy(){this.moovie_el_video.remove()}build(){this.SetupPlayer()}addTrack(e){if(e.options&&"object"==typeof e.options){for(var t=Object.keys(e.options).length,n=0;n<t;n++){var o,i,s;o=e.options[n].label?"label='"+e.options[n].label+"'":"label='New Subtitle'",i=e.options[n].srclang?"srclang='"+e.options[n].srclang+"'":"srclang='New'",(s=e.options[n].src?"src='"+e.options[n].src+"'":"")?document.getElementById(this.selector).insertAdjacentHTML("beforeend","<track "+o+" "+i+" "+s+">"):console.log("Error, 'src' can not be empty.")}document.querySelectorAll("#moovie_submenu_captions_"+this.randomID+" .caption_track").forEach((e=>{e.remove()})),this.GetCaptions(),"function"==typeof e.onComplete&&"function"==typeof(l=e.onComplete)&&l()}else console.error("Options must be and Object. Read documentation.");var l}change(e){var t;e.video&&"object"==typeof e.video?(e.video.videoSrc&&(this.video.pause(),this.video.src=e.video.videoSrc),e.video.posterSrc&&(this.element.setAttribute("poster",e.video.posterSrc),this.moovie_el_poster.style.backgroundImage="url("+e.video.posterSrc+")"),e.captions&&"object"==typeof e.captions&&e.captions.clearCaptions&&document.querySelectorAll("#moovie_submenu_captions_"+this.randomID+" .caption_track").forEach((e=>{e.remove()})),"function"==typeof e.onComplete&&"function"==typeof(t=e.onComplete)&&t()):console.error("Options must be and Object. Read documentation.")}get playerElement(){return this.video}get playing(){return Boolean(this.video.ready&&!this.video.paused&&!this.video.ended)}get paused(){return Boolean(this.video.paused)}get stopped(){return Boolean(this.video.paused&&0===this.video.currentTime)}get ended(){return Boolean(this.video.ended)}get duration(){const e=parseFloat(this.video.duration),t=(this.video.media||{}).duration;return e||(t||t===1/0?0:t)}get seeking(){return Boolean(this.video.seeking)}get currentTime(){return Number(this.video.currentTime)}get volume(){return this.video.volume}get muted(){return Boolean(this.video.muted)}get speed(){return Number(this.video.playbackRate)}get minimumSpeed(){return.1}get maximumSpeed(){return 8}get minimumOffset(){return-5}get maximumOffset(){return 5}get source(){return this.video.currentSrc}get captionOffset(){return this.moovie_el_rangeinput.value}set currentTime(e){this.video.currentTime=e,this.moovie_el_progressbar.value=e}set volume(e){this.video.volume=e,this.moovie_el_volume.value=e,this.checkSoundLevel("checkMute")}set speed(e){if(e<-.1||e>8)return"Value must be between -0.1 and 8";this.video.playbackRate=e,this.moovie_el_speedinput.value=e,this.SpeedChange()}set captionOffset(e){if(e<-5||e>5)return"Value must be between -5 and 5";this.moovie_el_rangeinput.value=e,this.OffsetChange()}set source(e){this.video.pause(),this.video.src=e,this.video.play()}set muted(e){e?this.checkSoundLevel("mutePlayer"):this.checkSoundLevel("unmutePlayer")}}try{module.exports=exports=Moovie}catch(e){}
//# sourceMappingURL=/sm/fa2978a2e66acb1fd45c087e2a4a51d7089e3db298b9ada712dc4080c698e9a5.map